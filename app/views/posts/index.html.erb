<% if flash[:notice] %>
  <p><%= flash[:notice] %></p>
<% end %>

<div class="container mt-4 d-flex justify-content-center">
  <div class="col-md-8">
    <div id="postContainer">
      <% @posts.each do |post| %>
        <div class="card post-card">
          <div class="card-body">
            <div class="d-flex align-items-start">
              <% if post.user.profile_picture.attached? %>
                <%= image_tag(post.user.profile_picture, class: 'profile-picture-index me-3')%>
              <% else %>
                <%= image_tag('default_profile_picture.png', class: 'profile-picture-index me-3') %>
              <%end%>
              <div>
                <h5 class="card-title"><%= link_to post.user.username, user_path(post.user) %></h5>
                <p class="post-caption"><%= post.title %></p>
              </div>
            </div>
            <div> <%= link_to image_tag(post.image, class: 'img-fluid post-image-index mt-3'), post_path(post) %></div>
            <div class="d-flex justify-content-between mt-3">
              <% if logged_in? %>
                <div class="d-flex align-items-center">
                  <button class="btn btn-outline-primary btn-md like-btn btn-icon like-button" data-post-id="<%= post.id %>">
                    <%= current_user.liked_posts.include?(post) ? 'Unlike' : 'Like' %>
                  </button>
                  <span class="ms-2" id="like-count-<%= post.id %>"><%= post.likes.count %> likes</span>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>